<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>

<body>
  <script>
  // function repeat(func, times, wait) {
  //   return function() {
  //     var ti = 0;
  //     var args = arguments;
  //     (function fn() {
  //       if (ti++ != times) {
  //         func.apply(this, args);
  //         setTimeout(fn, wait)
  //       }
  //     })();
  //   }
  // }
  // var repeatFun = repeat(alert, 3, 200);
  // repeatFun('hehe');


  function doActionsInBatch(action, idList) {
    var id = idList.shift();

    (function callee() {
      var id = idList.shift();
      if (id) {
        action().then(callee);
      }
    })();

  }
  </script>
</body>

</html>